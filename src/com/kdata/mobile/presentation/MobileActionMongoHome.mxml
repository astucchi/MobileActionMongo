<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" title="MAMHome" xmlns:parsley="http://www.spicefactory.org/parsley">
	<fx:Declarations>		
		<parsley:Configure />		
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
			import com.kdata.mobile.application.MongoHandler;
			import com.kdata.mobile.application.MongoQueryEvent;
			
			import mx.collections.ArrayCollection;
			
			[MessageDispatcher] public var dispatchMessage : Function;
			
			[Inject] [Bindable] public var model :Documents;
			
			public function test() : void {
				// query to MongoDB
				dispatchMessage( MongoQueryEvent.getMongoSendQuery());
			}	
		]]>
	</fx:Script>
	
	<s:navigationContent>
		<s:Button icon="@Embed('assets/back.png')" click="dispatchMessage(MongoQueryEvent.getMongoDisconnect()); navigator.popView()"/>
	</s:navigationContent>
	
	
	<s:Button id="btnTest" left="10" top="20" label="Pull Data" click="test()"/>
	<s:Button right="70" top="20"  label="New Insert" click="navigator.pushView(MAMInsert)"/>
	<s:DataGrid top="90" width="100%" height="100%" dataProvider="{model.documents}" />
</s:View>
